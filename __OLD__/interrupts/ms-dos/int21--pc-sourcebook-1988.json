{
	"id": "msdos-int21",
	"source": {
		"book": "programmer-pc-sourcebook-ms-press-1988",
		"section": "Section 3"
	},
	"interrupts": [
		{
			"match": {
				"registers": {
					"ah": "0x00"
				}
			},
			"in": {
				"registers": {
					"cs": "Segment address of PSP"
				}
			},
			"out": {
				"does not return": "program termination"
			},
			"notes": [
				"Function does not return",
				"File buffers flushed",
				"Termination handler restored from PSP:000AH",
				"Ctrl+C exit address restored from PSP:000EH",
				"Critical error handler restored from PSP:0012H, MS-DOS 2.x and later only",
				"Control passes to termination handler address",
				"Obsolete function; in DOS 2.x or later use function 31H or 4CH instead"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Terminate program"
		},
		{
			"match": {
				"registers": {
					"ah": "0x01"
				}
			},
			"in": {
			},
			"out": {
				"registers": {
					"al": "8-bit char code"
				}
			},
			"notes": [
				"Function echoes characters to display, Control-C is enabled; waits for character to be input from standard input device",
				"Obsolete function; in DOS 2.x or later use function 3FH instead",
				"Either 8-bit IBM ASCII code, or one of two bytes of an IBM Extended ASCII code"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Read keyboard and echo"
		},
		{
			"match": {
				"registers": {
					"ah": "0x02"
				}
			},
			"in": {
				"registers": {
					"dl": "8-bit char to display"
				}
			},
			"out": {
			},
			"notes": [
				"Obsolete function; in DOS 2.x or later use function 40H instead",
				"Cursor position updated; if character is a backspace (08H), the cursor is moved to the left one position, but the character there is not erased"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Display character"
		},
		{
			"match": {
				"registers": {
					"ah": "0x03"
				}
			},
			"in": {
			},
			"out": {
				"registers": {
					"al": "8-bit char from AUX"
				}
			},
			"notes": [
				"This function does not check status of AUX port, buffer input, or return error codes",
				"Obsolete function; in DOS 2.x or later use function 3FH instead",
				"DOS initializes the standard auxiliary device to 2400 baud, no parity, one stop bit, and 8-bit words"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Auxiliary input"
		},
		{
			"match": {
				"registers": {
					"ah": "0x04"
				}
			},
			"in": {
				"registers": {
					"dl": "8-bit char to AUX"
				}
			},
			"out": {
			},
			"notes": [
				"This function does not check status of AUX port, buffer output, or return error codes",
				"Obsolete function; in DOS 2.x or later use function 40H instead"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Auxiliary output"
		},
		{
			"match": {
				"registers": {
					"ah": "0x05"
				}
			},
			"in": {
				"registers": {
					"dl": "8-bit char to print"
				}
			},
			"out": {
			},
			"notes": [
				"This function does not check status of printer port, buffer output, or return error codes",
				"Obsolete function; in DOS 2.x or later use function 40H instead"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Print character"
		},
		{
			"match": {
				"registers": {
					"ah": "0x06",
					"dl": "!0xFF"
				}
			},
			"in": {
				"registers": {
					"dl": "8-bit char"
				}
			},
			"out": {
			},
			"notes": [
				"Obsolete function; in DOS 2.x or later use function 3FH and 40H",
				"If DL=FFH, console input is performed, otherwise DL is sent to console"
			],
			"json notes": [
				"The PC programmer's sourcebook shows INT 21h AH=06H as one entry, and shows both DL=!FFh and DL=FFh cases. This JSON reference splits it into two based on DL"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Direct console output",
			"original title": "Direct console I/O"
		},
		{
			"match": {
				"registers": {
					"ah": "0x06",
					"dl": "0xFF"
				}
			},
			"in": {
			},
			"out": {
				"registers": {
					"al": "8-bit char or 00H",
					"zf": "ZF flag clear if AL contains character, ZF flag set otherwise"
				}
			},
			"notes": [
				"Obsolete function; in DOS 2.x or later use function 3FH and 40H",
				"If DL=FFH, console input is performed, otherwise DL is sent to console",
				"If ZeroFlag is clear, AL contains character from console; otherwise AL = 0"
			],
			"json notes": [
				"The PC programmer's sourcebook shows INT 21h AH=06H as one entry, and shows both DL=!FFh and DL=FFh cases. This JSON reference splits it into two based on DL"
			],
			"requirements": [
				"dos_version >= 1.0"
			],
			"title": "Direct console input",
			"original title": "Direct console I/O"
		}
	]
}
